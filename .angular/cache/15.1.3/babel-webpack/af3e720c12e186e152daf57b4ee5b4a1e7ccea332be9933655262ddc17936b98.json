{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@auth0/angular-jwt\";\nimport * as i2 from \"src/app/services/api.service\";\nimport * as i3 from \"@angular/router\";\nexport class NavBarComponent {\n  constructor(jwtHelper, apiService, router) {\n    this.jwtHelper = jwtHelper;\n    this.apiService = apiService;\n    this.router = router;\n  }\n  ngOnInit() {\n    this.getUser();\n  }\n  getUser() {\n    const token = localStorage.getItem(\"jwt\");\n    if (token) {\n      this.id = this.jwtHelper.decodeToken(token).sub;\n    } else {\n      console.error(\"No token found in local storage.\");\n    }\n    this.subscription = this.apiService.getUser(this.id).subscribe(response => {\n      this.name = response.data.username;\n      console.log(this.name);\n    });\n  }\n  isUserAuthenticated() {\n    const token = localStorage.getItem(\"jwt\");\n    if (token && !this.jwtHelper.isTokenExpired(token)) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  logOut() {\n    localStorage.removeItem(\"jwt\");\n    this.router.navigate([\"login\"]);\n  }\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\nNavBarComponent.ɵfac = function NavBarComponent_Factory(t) {\n  return new (t || NavBarComponent)(i0.ɵɵdirectiveInject(i1.JwtHelperService), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.Router));\n};\nNavBarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NavBarComponent,\n  selectors: [[\"app-nav-bar\"]],\n  decls: 10,\n  vars: 0,\n  consts: [[1, \"bg-gradient-to-r\", \"from-teal-500\", \"to-cyan-900\", \"text-white\", \"shadow\", \"focus:outline-none\", \"focus:ring-3\", \"focus:ring-cyan-900\", \"focus:ring-offset-4\", \"focus:ring-offset-gray-900\", \"pt-4\"], [1, \"md:flex\", \"md:items-center\", \"md:justify-between\"], [1, \"min-w-0\", \"flex-1\"], [1, \"text-2xl\", \"font-bold\", \"leading-7\", \"text-white\", \"sm:truncate\", \"sm:text-3xl\", \"sm:tracking-tight\"], [1, \"mt-4\", \"flex\", \"md:mt-0\", \"md:ml-4\"], [\"type\", \"button\", 1, \"inline-flex\", \"items-center\", \"rounded-md\", \"border\", \"border-transparent\", \"bg-gray-600\", \"px-4\", \"py-2\", \"text-sm\", \"font-medium\", \"text-white\", \"shadow-sm\", \"hover:bg-gray-700\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-indigo-500\", \"focus:ring-offset-2\", \"focus:ring-offset-gray-800\"], [\"type\", \"button\", 1, \"ml-3\", \"inline-flex\", \"items-center\", \"rounded-md\", \"border\", \"border-transparent\", \"bg-indigo-500\", \"px-4\", \"py-2\", \"text-sm\", \"font-medium\", \"text-white\", \"shadow-sm\", \"hover:bg-indigo-600\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-indigo-500\", \"focus:ring-offset-2\", \"focus:ring-offset-gray-800\"]],\n  template: function NavBarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h2\", 3);\n      i0.ɵɵtext(4, \"Back End Developer\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 4)(6, \"button\", 5);\n      i0.ɵɵtext(7, \"Edit\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"button\", 6);\n      i0.ɵɵtext(9, \"Publish\");\n      i0.ɵɵelementEnd()()()();\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;AAWA,OAAM,MAAOA,eAAe;EAM1BC,YACUC,SAA2B,EAC3BC,UAAqB,EACrBC,MAAc;IAFd,cAAS,GAATF,SAAS;IACT,eAAU,GAAVC,UAAU;IACV,WAAM,GAANC,MAAM;EACb;EAEHC,QAAQ;IACR,IAAI,CAACC,OAAO,EAAE;EACd;EAEAA,OAAO;IACL,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC;IACzC,IAAIF,KAAK,EAAE;MACT,IAAI,CAACG,EAAE,GAAG,IAAI,CAACR,SAAS,CAACS,WAAW,CAACJ,KAAK,CAAC,CAACK,GAAG;KAChD,MAAM;MACLC,OAAO,CAACC,KAAK,CAAC,kCAAkC,CAAC;;IAEnD,IAAI,CAACC,YAAY,GAAC,IAAI,CAACZ,UAAU,CAACG,OAAO,CAAC,IAAI,CAACI,EAAE,CAAC,CAACM,SAAS,CAACC,QAAQ,IAAE;MACrE,IAAI,CAACC,IAAI,GAACD,QAAQ,CAACE,IAAI,CAACC,QAAQ;MAChCP,OAAO,CAACQ,GAAG,CAAC,IAAI,CAACH,IAAI,CAAC;IACxB,CAAC,CAAC;EACJ;EAEAI,mBAAmB;IACjB,MAAMf,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC;IACzC,IAAIF,KAAK,IAAI,CAAC,IAAI,CAACL,SAAS,CAACqB,cAAc,CAAChB,KAAK,CAAC,EAAE;MAClD,OAAO,IAAI;KACZ,MACI;MACH,OAAO,KAAK;;EAEhB;EAEAiB,MAAM;IACJhB,YAAY,CAACiB,UAAU,CAAC,KAAK,CAAC;IAC9B,IAAI,CAACrB,MAAM,CAACsB,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;EACjC;EAEAC,WAAW;IACT,IAAI,IAAI,CAACZ,YAAY,EAAE;MACrB,IAAI,CAACA,YAAY,CAACa,WAAW,EAAE;;EAEnC;;AAhDW5B,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;QAAfA,eAAe;EAAA6B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCX5BC,8BAAmL;MAG3EA,kCAAkB;MAAAA,iBAAK;MAEvHA,8BAAuC;MAC6OA,oBAAI;MAAAA,iBAAS;MAC/RA,iCAA2R;MAAAA,uBAAO;MAAAA,iBAAS","names":["NavBarComponent","constructor","jwtHelper","apiService","router","ngOnInit","getUser","token","localStorage","getItem","id","decodeToken","sub","console","error","subscription","subscribe","response","name","data","username","log","isUserAuthenticated","isTokenExpired","logOut","removeItem","navigate","ngOnDestroy","unsubscribe","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["/Users/abb/sources/inyakaabraham/Hobby-Project/blogFrontend/src/app/components/nav-bar/nav-bar.component.ts","/Users/abb/sources/inyakaabraham/Hobby-Project/blogFrontend/src/app/components/nav-bar/nav-bar.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { ApiService } from 'src/app/services/api.service';\nimport { Subscription } from 'rxjs';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-nav-bar',\n  templateUrl: './nav-bar.component.html',\n  styleUrls: ['./nav-bar.component.css']\n})\nexport class NavBarComponent implements OnInit, OnDestroy{\n\n  subscription?: Subscription;\n  id!:number;\n  name!:string;\n\n  constructor(\n    private jwtHelper: JwtHelperService, \n    private apiService:ApiService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n  this.getUser();\n  }\n\n  getUser():void{\n    const token = localStorage.getItem(\"jwt\");\n    if (token) {\n      this.id = this.jwtHelper.decodeToken(token).sub;\n    } else {\n      console.error(\"No token found in local storage.\");\n    }    \n    this.subscription=this.apiService.getUser(this.id).subscribe(response=>{\n      this.name=response.data.username;\n      console.log(this.name);\n    });\n  }\n\n  isUserAuthenticated() {\n    const token = localStorage.getItem(\"jwt\");\n    if (token && !this.jwtHelper.isTokenExpired(token)) {\n      return true;\n    }\n    else {\n      return false;\n    }\n  }\n\n  logOut(){\n    localStorage.removeItem(\"jwt\");\n    this.router.navigate([\"login\"]);\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","<div class=\"bg-gradient-to-r from-teal-500 to-cyan-900 text-white shadow  focus:outline-none focus:ring-3 focus:ring-cyan-900 focus:ring-offset-4 focus:ring-offset-gray-900 pt-4\">\n    <div class=\"md:flex md:items-center md:justify-between\">\n        <div class=\"min-w-0 flex-1\">\n          <h2 class=\"text-2xl font-bold leading-7 text-white sm:truncate sm:text-3xl sm:tracking-tight\">Back End Developer</h2>\n        </div>\n        <div class=\"mt-4 flex md:mt-0 md:ml-4\">\n          <button type=\"button\" class=\"inline-flex items-center rounded-md border border-transparent bg-gray-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-800\">Edit</button>\n          <button type=\"button\" class=\"ml-3 inline-flex items-center rounded-md border border-transparent bg-indigo-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-800\">Publish</button>\n        </div>\n      </div>\n</div>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}