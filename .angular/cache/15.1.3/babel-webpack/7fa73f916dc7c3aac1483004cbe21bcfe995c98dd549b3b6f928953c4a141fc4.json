{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@auth0/angular-jwt\";\nimport * as i2 from \"src/app/services/api.service\";\nimport * as i3 from \"@angular/router\";\nexport class NavBarComponent {\n  constructor(jwtHelper, apiService, router) {\n    this.jwtHelper = jwtHelper;\n    this.apiService = apiService;\n    this.router = router;\n  }\n  ngOnInit() {\n    this.getUser();\n  }\n  getUser() {\n    const token = localStorage.getItem(\"jwt\");\n    if (token) {\n      this.id = this.jwtHelper.decodeToken(token).sub;\n    } else {\n      console.error(\"No token found in local storage.\");\n    }\n    this.subscription = this.apiService.getUser(this.id).subscribe(response => {\n      this.name = response.data.username;\n      console.log(this.name);\n    });\n  }\n  isUserAuthenticated() {\n    const token = localStorage.getItem(\"jwt\");\n    if (token && !this.jwtHelper.isTokenExpired(token)) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  logOut() {\n    localStorage.removeItem(\"jwt\");\n    this.router.navigate([\"login\"]);\n  }\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\nNavBarComponent.ɵfac = function NavBarComponent_Factory(t) {\n  return new (t || NavBarComponent)(i0.ɵɵdirectiveInject(i1.JwtHelperService), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.Router));\n};\nNavBarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NavBarComponent,\n  selectors: [[\"app-nav-bar\"]],\n  decls: 13,\n  vars: 0,\n  consts: [[1, \"bg-gray-900\", \"pt-4\"], [\"aria-label\", \"Global\", 1, \"relative\", \"mx-auto\", \"inline-flex\", \"max-w-7xl\", \"items-center\", \"justify-between\", \"px-6\"], [1, \"flex\", \"flex-1\", \"items-center\"], [1, \"flex\", \"w-full\", \"items-center\", \"justify-between\", \"md:w-auto\"], [\"href\", \"#\"], [1, \"sr-only\"], [\"routerLink\", \"\", \"src\", \"./assets/img/Lovepik_com-400262015-green-plants-hand-painted-leaves.png\", \"alt\", \"Writer's Meet Logo\", 1, \"mx-auto\", \"h-20\", \"w-30\"], [1, \"md:flex\", \"md:items-center\", \"md:space-x-6\"], [\"data-darkreader-inline-stroke\", \"\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"1.5\", \"viewBox\", \"0 0 24 24\", \"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"h-9\", \"w-9\", \"pt-2\", \"pb-2\", \"rounded-md\", \"bg-gradient-to-r\", \"from-teal-500\", \"to-cyan-600\", \"text-white\", \"shadow\", \"hover:from-teal-600\", \"hover:to-cyan-700\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-cyan-400\", \"focus:ring-offset-2\", \"focus:ring-offset-gray-900\", 3, \"click\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M5.636 5.636a9 9 0 1012.728 0M12 3v9\"], [1, \"md:flex\", \"md:items-center\", \"md:space-x-6\", \"text-white\", \"text-center\", \"pr-2\", \"text-sm\", \"font-semibold\", \"text-semibold\"]],\n  template: function NavBarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"nav\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"a\", 4)(5, \"span\", 5);\n      i0.ɵɵtext(6, \"Your Company\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"img\", 6);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(8, \"div\", 7);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(9, \"svg\", 8);\n      i0.ɵɵlistener(\"click\", function NavBarComponent_Template__svg_svg_click_9_listener() {\n        return ctx.logOut();\n      });\n      i0.ɵɵelement(10, \"path\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(11, \"span\", 10);\n      i0.ɵɵtext(12, \"vhvjhsdfsdsdfsvjhsv \");\n      i0.ɵɵelementEnd()()()();\n    }\n  },\n  dependencies: [i3.RouterLink],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;AAWA,OAAM,MAAOA,eAAe;EAM1BC,YACUC,SAA2B,EAC3BC,UAAqB,EACrBC,MAAc;IAFd,cAAS,GAATF,SAAS;IACT,eAAU,GAAVC,UAAU;IACV,WAAM,GAANC,MAAM;EACb;EAEHC,QAAQ;IACR,IAAI,CAACC,OAAO,EAAE;EACd;EAEAA,OAAO;IACL,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC;IACzC,IAAIF,KAAK,EAAE;MACT,IAAI,CAACG,EAAE,GAAG,IAAI,CAACR,SAAS,CAACS,WAAW,CAACJ,KAAK,CAAC,CAACK,GAAG;KAChD,MAAM;MACLC,OAAO,CAACC,KAAK,CAAC,kCAAkC,CAAC;;IAEnD,IAAI,CAACC,YAAY,GAAC,IAAI,CAACZ,UAAU,CAACG,OAAO,CAAC,IAAI,CAACI,EAAE,CAAC,CAACM,SAAS,CAACC,QAAQ,IAAE;MACrE,IAAI,CAACC,IAAI,GAACD,QAAQ,CAACE,IAAI,CAACC,QAAQ;MAChCP,OAAO,CAACQ,GAAG,CAAC,IAAI,CAACH,IAAI,CAAC;IACxB,CAAC,CAAC;EACJ;EAEAI,mBAAmB;IACjB,MAAMf,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC;IACzC,IAAIF,KAAK,IAAI,CAAC,IAAI,CAACL,SAAS,CAACqB,cAAc,CAAChB,KAAK,CAAC,EAAE;MAClD,OAAO,IAAI;KACZ,MACI;MACH,OAAO,KAAK;;EAEhB;EAEAiB,MAAM;IACJhB,YAAY,CAACiB,UAAU,CAAC,KAAK,CAAC;IAC9B,IAAI,CAACrB,MAAM,CAACsB,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;EACjC;EAEAC,WAAW;IACT,IAAI,IAAI,CAACZ,YAAY,EAAE;MACrB,IAAI,CAACA,YAAY,CAACa,WAAW,EAAE;;EAEnC;;AAhDW5B,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;QAAfA,eAAe;EAAA6B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCX5BC,8BAA8B;MAKYA,4BAAY;MAAAA,iBAAO;MACzCA,yBAE6B;MACjCA,iBAAI;MAGZA,8BAAmD;MAC/CA,mBAE2D;MAF3DA,8BAE2D;MAFtDA;QAAA,OAASC,YAAQ;MAAA,EAAC;MAGnBD,2BAAqG;MACzGA,iBAAM;MACNA,oBAAoH;MAApHA,iCAAoH;MAAAA,qCAAoB;MAAAA,iBAAO","names":["NavBarComponent","constructor","jwtHelper","apiService","router","ngOnInit","getUser","token","localStorage","getItem","id","decodeToken","sub","console","error","subscription","subscribe","response","name","data","username","log","isUserAuthenticated","isTokenExpired","logOut","removeItem","navigate","ngOnDestroy","unsubscribe","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/Users/abb/sources/inyakaabraham/Hobby-Project/blogFrontend/src/app/components/nav-bar/nav-bar.component.ts","/Users/abb/sources/inyakaabraham/Hobby-Project/blogFrontend/src/app/components/nav-bar/nav-bar.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { ApiService } from 'src/app/services/api.service';\nimport { Subscription } from 'rxjs';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-nav-bar',\n  templateUrl: './nav-bar.component.html',\n  styleUrls: ['./nav-bar.component.css']\n})\nexport class NavBarComponent implements OnInit, OnDestroy{\n\n  subscription?: Subscription;\n  id!:number;\n  name!:string;\n\n  constructor(\n    private jwtHelper: JwtHelperService, \n    private apiService:ApiService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n  this.getUser();\n  }\n\n  getUser():void{\n    const token = localStorage.getItem(\"jwt\");\n    if (token) {\n      this.id = this.jwtHelper.decodeToken(token).sub;\n    } else {\n      console.error(\"No token found in local storage.\");\n    }    \n    this.subscription=this.apiService.getUser(this.id).subscribe(response=>{\n      this.name=response.data.username;\n      console.log(this.name);\n    });\n  }\n\n  isUserAuthenticated() {\n    const token = localStorage.getItem(\"jwt\");\n    if (token && !this.jwtHelper.isTokenExpired(token)) {\n      return true;\n    }\n    else {\n      return false;\n    }\n  }\n\n  logOut(){\n    localStorage.removeItem(\"jwt\");\n    this.router.navigate([\"login\"]);\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","<div class=\"bg-gray-900 pt-4\">\n    <nav class=\"relative mx-auto inline-flex max-w-7xl items-center justify-between px-6\" aria-label=\"Global\">\n        <div class=\"flex flex-1 items-center\">\n            <div class=\"flex w-full items-center justify-between md:w-auto\">\n                <a href=\"#\">\n                    <span class=\"sr-only\">Your Company</span>\n                    <img routerLink=\"\" class=\"mx-auto h-20 w-30 \"\n                        src=\"./assets/img/Lovepik_com-400262015-green-plants-hand-painted-leaves.png\"\n                        alt=\"Writer's Meet Logo\">\n                </a>\n            </div>\n        </div>\n        <div class=\" md:flex md:items-center md:space-x-6\">\n            <svg (click)=\"logOut()\" class=\"h-9 w-9 pt-2 pb-2 rounded-md bg-gradient-to-r from-teal-500 to-cyan-600 text-white shadow hover:from-teal-600 hover:to-cyan-700 focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-offset-2 focus:ring-offset-gray-900\"\n                data-darkreader-inline-stroke=\"\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\"\n                viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M5.636 5.636a9 9 0 1012.728 0M12 3v9\"></path>\n            </svg>\n            <span class=\"md:flex md:items-center md:space-x-6 text-white text-center pr-2 text-sm font-semibold text-semibold \">vhvjhsdfsdsdfsvjhsv </span>\n        </div>\n        \n    </nav>\n</div>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}