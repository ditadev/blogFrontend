{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet NewArticleComponent = class NewArticleComponent {\n  constructor(apiService, route, router) {\n    this.apiService = apiService;\n    this.route = route;\n    this.router = router;\n    this.msg = \"\";\n  }\n  postArticle() {\n    this.subscription = this.apiService.postArticle(this._article).subscribe(response => {\n      console.log(response);\n    });\n  }\n  //selectFile(event) { //Angular 8\n  selectFile(event) {\n    if (!event.target.files[0] || event.target.files[0].length == 0) {\n      this.msg = 'You must select an image';\n      return;\n    }\n    var mimeType = event.target.files[0].type;\n    if (mimeType.match(/image\\/*/) == null) {\n      this.msg = \"Only images are supported\";\n      return;\n    }\n    var reader = new FileReader();\n    reader.readAsDataURL(event.target.files[0]);\n    reader.onload = _event => {\n      this.msg = \"\";\n      this.url = reader.result;\n    };\n  }\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n};\nNewArticleComponent = __decorate([Component({\n  selector: 'app-new-article',\n  templateUrl: './new-article.component.html',\n  styleUrls: ['./new-article.component.css']\n})], NewArticleComponent);\nexport { NewArticleComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAA2B,eAAe;AAarD,IAAMC,mBAAmB,GAAzB,MAAMA,mBAAmB;EAM9BC,YACUC,UAAsB,EACtBC,KAAqB,EACrBC,MAAc;IAFd,eAAU,GAAVF,UAAU;IACV,UAAK,GAALC,KAAK;IACL,WAAM,GAANC,MAAM;IAalB,QAAG,GAAG,EAAE;EAZH;EAELC,WAAW;IACT,IAAI,CAACC,YAAY,GAAC,IAAI,CAACJ,UAAU,CAACG,WAAW,CAAC,IAAI,CAACE,QAAQ,CAAC,CAACC,SAAS,CACpEC,QAAQ,IAAE;MACNC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;IACzB,CAAC,CACF;EACH;EAMA;EACAG,UAAU,CAACC,KAAU;IACnB,IAAG,CAACA,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,IAAIF,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACC,MAAM,IAAI,CAAC,EAAE;MAC9D,IAAI,CAACC,GAAG,GAAG,0BAA0B;MACrC;;IAGF,IAAIC,QAAQ,GAAGL,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACI,IAAI;IAEzC,IAAID,QAAQ,CAACE,KAAK,CAAC,UAAU,CAAC,IAAI,IAAI,EAAE;MACtC,IAAI,CAACH,GAAG,GAAG,2BAA2B;MACtC;;IAGF,IAAII,MAAM,GAAG,IAAIC,UAAU,EAAE;IAC7BD,MAAM,CAACE,aAAa,CAACV,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;IAE3CM,MAAM,CAACG,MAAM,GAAIC,MAAM,IAAI;MACzB,IAAI,CAACR,GAAG,GAAG,EAAE;MACb,IAAI,CAACS,GAAG,GAAGL,MAAM,CAACM,MAAM;IAC1B,CAAC;EACH;EAEEC,WAAW;IACT,IAAI,IAAI,CAACtB,YAAY,EAAE;MACrB,IAAI,CAACA,YAAY,CAACuB,WAAW,EAAE;;EAEnC;CACD;AApDY7B,mBAAmB,eAL/BD,SAAS,CAAC;EACT+B,QAAQ,EAAE,iBAAiB;EAC3BC,WAAW,EAAE,8BAA8B;EAC3CC,SAAS,EAAE,CAAC,6BAA6B;CAC1C,CAAC,GACWhC,mBAAmB,CAoD/B;SApDYA,mBAAmB","names":["Component","NewArticleComponent","constructor","apiService","route","router","postArticle","subscription","_article","subscribe","response","console","log","selectFile","event","target","files","length","msg","mimeType","type","match","reader","FileReader","readAsDataURL","onload","_event","url","result","ngOnDestroy","unsubscribe","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/Users/abb/sources/inyakaabraham/Hobby-Project/blogFrontend/src/app/components/new-article/new-article.component.ts"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ApiService } from 'src/app/services/api.service';\nimport { Subscription } from 'rxjs';\nimport { ActivatedRoute } from '@angular/router';\nimport { BlogPost } from 'src/app/models/blogPost';\nimport { Router } from '@angular/router';\nimport { HttpEventType } from '@angular/common/http';\n\n@Component({\n  selector: 'app-new-article',\n  templateUrl: './new-article.component.html',\n  styleUrls: ['./new-article.component.css']\n})\nexport class NewArticleComponent implements OnDestroy{\n  \n  subscription?: Subscription;\n _article!:BlogPost;\n  progressInfos: any;\n\n  constructor(\n    private apiService: ApiService,\n    private route: ActivatedRoute,\n    private router: Router\n  ) {}\n\npostArticle(){\n  this.subscription=this.apiService.postArticle(this._article).subscribe(\n    response=>{\n        console.log(response);\n    }\n  );\n}\n\n\nurl: any; //Angular 11, for stricter type\nmsg = \"\";\n\n//selectFile(event) { //Angular 8\nselectFile(event: any) { //Angular 11, for stricter type\n  if(!event.target.files[0] || event.target.files[0].length == 0) {\n    this.msg = 'You must select an image';\n    return;\n  }\n  \n  var mimeType = event.target.files[0].type;\n  \n  if (mimeType.match(/image\\/*/) == null) {\n    this.msg = \"Only images are supported\";\n    return;\n  }\n  \n  var reader = new FileReader();\n  reader.readAsDataURL(event.target.files[0]);\n  \n  reader.onload = (_event) => {\n    this.msg = \"\";\n    this.url = reader.result; \n  }\n}\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}